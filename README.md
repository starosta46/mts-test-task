# mts-test-task

Тестовое задание:
- приложение представляет собой http-сервер с одним хендлером
- хендлер на вход получает POST-запрос со списком url в json-формате
- сервер запрашивает данные по всем этим url паралельно и возвращает результат клиенту в json-формате
- если в процессе обработки хотя бы одного из url получена ошибка, обработка всего списка прекращается и клиенту возвращается текстовая ошибка
- сервер не принимает запрос если количество url в в нем больше 20
- сервер не обслуживает больше чем 100 одновременных входящих http-запросов
- таймаут на обработку одного входящего запроса - 10000 милесекунд
- таймаут на запрос одного url - 500 Милесекунд
- сервис должен поддерживать 'graceful shutdown': при получении сигнала от OS перестать принимать входящие запросы, завершить текущие запросы и остановиться
- записать полученные ответы в БД (postgres или mongodb)
- при повторном получении запроса на тот же URL в течение 1 минуты брать результат из бд вместо выполнения запроса
- результат должен быть выложен на github


./pkg/httpclient - пакет для использования методов данного сервиса другими.

Обработчик ошибок может быть легко подменен на другой. В данном сервисе идет разделение ошибок для логов и пользователя.

Интерфейс сервиса и клиентский транспорт находится в директории pkg, чтобы иметь возможность использовать их в другом сервисе.

Вся "приватная" логика находится в директории internal.

MongoDB используется в роли "кэша", ошибки при чтении или записи не останавливают работу программы.

Базу данных можно поднять с помощью docker-compose up -d, сервис - go run ./cmd/sites-data/main.go, сервис поднимется на порту 8080

Пример запроса:

```bigquery
curl --location --request POST 'localhost:8080/api/v1/urls/data' \
--header 'Content-Type: application/json' \
--data-raw '["https://ru.wikipedia.org", "http://ozon.ru", "http://wildberries.ru"]
'
```


